<pre><font color="#007f69">globals</font><font color="#000000"><br />[<br />  clock<br />  generations          </font><font color="#5a5a5a">; a counter to keep track of the number of times the cells have divided</font><font color="#000000"><br />  number-of-cells      </font><font color="#5a5a5a">; a counter used to keep track of the number of total cells in the world</font><font color="#000000"><br />  Migration-Probability<br />  Macrophage-Strength<br />  Neutrophil-Homing-Range<br />  ShowDebris<br />]<br /><br /></font><font color="#660096">breed</font><font color="#000000"> [bacteria bacterium]         </font><font color="#5a5a5a">; this is the sub-category of turtles that are bacterial cells</font><font color="#000000"><br /></font><font color="#660096">breed</font><font color="#000000"> [neutrophils neutrophil]    </font><font color="#5a5a5a">; this is the first wave of immunes cells, they release anti-microbial cytokines and can also phagocytose bacteria</font><font color="#000000"><br /></font><font color="#660096">breed</font><font color="#000000"> [macrophages macrophage]     </font><font color="#5a5a5a">; this is the second wave of immune cells, the phagocytes that &quot;clean up&quot; debris and remove aged neutrophils</font><font color="#000000"><br /></font><font color="#660096">breed</font><font color="#000000"> [ source sources ]<br /><br /></font><font color="#007f69">turtles-own</font><font color="#000000"> [age]      </font><font color="#5a5a5a">; a counter to keep track of turtles age after dividing (replaces &quot;clock&quot;)</font><font color="#000000"><br /></font><font color="#007f69">patches-own</font><font color="#000000"> [<br />  debris               </font><font color="#5a5a5a">; all dead cell become &quot;debris&quot; that must be removed to fully heal the wound</font><font color="#000000"><br />  wound                </font><font color="#5a5a5a">; only a subset of patches are in the &quot;Wound&quot; and this represents where bacteria can enter from</font><font color="#000000"><br />  DRUGxcord<br />  DRUGycord<br />  patchDRUG<br />]<br /></font><font color="#007f69">source-own</font><font color="#000000"><br />[<br />turtleDRUG<br />]<br /></font><font color="#007f69">to</font><font color="#000000"> setup<br />  __clear-all-and-reset-ticks           </font><font color="#5a5a5a">; clear all</font><font color="#000000"><br /><br />  </font><font color="#0000aa">ask</font><font color="#000000"> </font><font color="#660096">patch</font><font color="#000000"> </font><font color="#963700">0</font><font color="#000000"> </font><font color="#963700">0</font><font color="#000000"> [</font><font color="#0000aa">ask</font><font color="#000000"> </font><font color="#660096">patches</font><font color="#000000"> </font><font color="#660096">in-radius</font><font color="#000000"> </font><font color="#963700">15</font><font color="#000000"> [</font><font color="#0000aa">set</font><font color="#000000"> wound </font><font color="#963700">1</font><font color="#000000"> </font><font color="#0000aa">set</font><font color="#000000"> </font><font color="#660096">pcolor</font><font color="#000000"> </font><font color="#963700">red</font><font color="#000000">]]<br /><br />  </font><font color="#0000aa">if</font><font color="#000000"> Neutrophil_Response </font><font color="#660096">=</font><font color="#000000"> </font><font color="#963700">&quot;Low&quot;</font><font color="#000000"> [create-neutrophils </font><font color="#660096">ceiling</font><font color="#000000"> (</font><font color="#963700">.1</font><font color="#000000"> </font><font color="#660096">*</font><font color="#000000"> Immune-Cell-Infiltration)]<br />  </font><font color="#0000aa">if</font><font color="#000000"> Neutrophil_Response </font><font color="#660096">=</font><font color="#000000"> </font><font color="#963700">&quot;Normal&quot;</font><font color="#000000"> [create-neutrophils </font><font color="#660096">ceiling</font><font color="#000000"> (</font><font color="#963700">1</font><font color="#000000"> </font><font color="#660096">*</font><font color="#000000"> Immune-Cell-Infiltration)]<br />  </font><font color="#0000aa">if</font><font color="#000000"> Neutrophil_Response </font><font color="#660096">=</font><font color="#000000"> </font><font color="#963700">&quot;High&quot;</font><font color="#000000"> [create-neutrophils </font><font color="#660096">ceiling</font><font color="#000000"> (</font><font color="#963700">2</font><font color="#000000"> </font><font color="#660096">*</font><font color="#000000"> Immune-Cell-Infiltration)]<br /><br />  </font><font color="#0000aa">ask</font><font color="#000000"> neutrophils<br />    [<br />      </font><font color="#0000aa">setxy</font><font color="#000000"> </font><font color="#660096">random-xcor</font><font color="#000000"> </font><font color="#660096">random-ycor</font><font color="#000000">      </font><font color="#5a5a5a">; randomize turtle locations to locations within the boundaries of the world</font><font color="#000000"><br />      </font><font color="#0000aa">setxy</font><font color="#000000"> </font><font color="#660096">pycor</font><font color="#000000"> </font><font color="#660096">pxcor</font><font color="#000000">                  </font><font color="#5a5a5a">; place the turtles on the center of each patch</font><font color="#000000"><br />      </font><font color="#0000aa">set</font><font color="#000000"> </font><font color="#660096">shape</font><font color="#000000"> </font><font color="#963700">&quot;neutrophil&quot;</font><font color="#000000">            </font><font color="#5a5a5a">; denote the shape of the turtle as an bacteria cell shape</font><font color="#000000"><br />      </font><font color="#0000aa">set</font><font color="#000000"> age </font><font color="#963700">1</font><font color="#000000"><br />    ]<br /><br />    </font><font color="#0000aa">set</font><font color="#000000"> Migration-Probability </font><font color="#963700">70</font><font color="#000000"><br />    </font><font color="#0000aa">set</font><font color="#000000"> Macrophage-Strength </font><font color="#963700">3</font><font color="#000000"><br />    </font><font color="#0000aa">set</font><font color="#000000"> Neutrophil-Homing-Range </font><font color="#963700">1</font><font color="#000000"><br />    </font><font color="#0000aa">set</font><font color="#000000"> ShowDebris </font><font color="#963700">true</font><font color="#000000"><br /></font><font color="#007f69">end</font><font color="#000000"><br /></font><font color="#5a5a5a">;~~~~~~~ add drugs</font><font color="#000000"><br /></font><font color="#007f69">to</font><font color="#000000"> draw-white<br />  </font><font color="#0000aa">if</font><font color="#000000"> </font><font color="#660096">mouse-down?</font><font color="#000000"> [<br />                  </font><font color="#0000aa">ask</font><font color="#000000"> </font><font color="#660096">patch</font><font color="#000000"> </font><font color="#660096">mouse-xcor</font><font color="#000000"> </font><font color="#660096">mouse-ycor</font><font color="#000000"> [ </font><font color="#0000aa">set</font><font color="#000000"> </font><font color="#660096">pcolor</font><font color="#000000"> </font><font color="#963700">white</font><font color="#000000">]<br />                   </font><font color="#0000aa">ask</font><font color="#000000"> </font><font color="#660096">patches</font><font color="#000000"> [</font><font color="#0000aa">set</font><font color="#000000"> DRUGxcord </font><font color="#660096">mouse-xcor</font><font color="#000000"> </font><font color="#0000aa">set</font><font color="#000000"> DRUGycord </font><font color="#660096">mouse-ycor</font><font color="#000000">]<br />                  ]<br /><br />  </font><font color="#5a5a5a">; if mouse-down? [</font><font color="#000000"><br />  </font><font color="#5a5a5a">;                 set [pcolor] of (patch-at mouse-xcor mouse-ycor) white</font><font color="#000000"><br />  </font><font color="#5a5a5a">;                ]</font><font color="#000000"><br />   </font><font color="#5a5a5a">;If the mousebutton is depressed, this subroutine sets the patch color of the patch</font><font color="#000000"><br />   </font><font color="#5a5a5a">;immediately underneath the mouse cursor to white.  Use this to mark your point sources.</font><font color="#000000"><br /></font><font color="#007f69">end</font><font color="#000000"><br /><br /></font><font color="#007f69">to</font><font color="#000000"> laydownsources<br />   </font><font color="#0000aa">ask</font><font color="#000000"> </font><font color="#660096">patches</font><font color="#000000"> [</font><font color="#0000aa">if</font><font color="#000000"> </font><font color="#660096">pcolor</font><font color="#000000"> </font><font color="#660096">=</font><font color="#000000"> </font><font color="#963700">white</font><font color="#000000"> [</font><font color="#0000aa">sprout</font><font color="#000000"> </font><font color="#963700">1</font><font color="#000000"> [</font><font color="#0000aa">set</font><font color="#000000"> </font><font color="#660096">breed</font><font color="#000000"> source]]]<br />   </font><font color="#0000aa">ask</font><font color="#000000"> source [</font><font color="#0000aa">set</font><font color="#000000"> turtleDRUG </font><font color="#963700">2000</font><font color="#000000"> </font><font color="#0000aa">set</font><font color="#000000"> patchDRUG turtleDRUG]<br /></font><font color="#007f69">end</font><font color="#000000"><br /><br /></font><font color="#007f69">to</font><font color="#000000"> diffuse-noturt-DRUG<br />  </font><font color="#0000aa">ask</font><font color="#000000"> </font><font color="#660096">patches</font><font color="#000000"> [</font><font color="#0000aa">if</font><font color="#000000"> </font><font color="#660096">pcolor</font><font color="#000000"> </font><font color="#660096">=</font><font color="#000000"> </font><font color="#963700">white</font><font color="#000000"> [ </font><font color="#0000aa">set</font><font color="#000000"> patchDRUG </font><font color="#963700">1000</font><font color="#000000"> ]]<br />  </font><font color="#0000aa">diffuse</font><font color="#000000"> patchDRUG </font><font color="#963700">.05</font><font color="#000000"><br />  </font><font color="#0000aa">ask</font><font color="#000000"> </font><font color="#660096">patches</font><font color="#000000"> [</font><font color="#0000aa">set</font><font color="#000000"> </font><font color="#660096">pcolor</font><font color="#000000"> </font><font color="#660096">scale-color</font><font color="#000000"> </font><font color="#963700">gray</font><font color="#000000"> patchDRUG </font><font color="#963700">0</font><font color="#000000"> </font><font color="#963700">50</font><font color="#000000">]<br /></font><font color="#5a5a5a">;  ask patches with [wound = 1 and debris = 0][set pcolor red] ;reset patch color to red or black based on previous wound state</font><font color="#000000"><br /></font><font color="#007f69">end</font><font color="#000000"><br />   </font><font color="#5a5a5a">; ask patches with [wound = 1 and debris = 0][set pcolor red] ;reset patch color to red or black based on previous wound state</font><font color="#000000"><br />  </font><font color="#5a5a5a">;  ask patches with [wound = 0 and debris = 0][set pcolor black]</font><font color="#000000"><br /></font><font color="#5a5a5a">;~~~~~~~~~~~~~~~~~~~~~~~~</font><font color="#000000"><br /><br /></font><font color="#007f69">to</font><font color="#000000"> Run-Simulation<br />  proliferate-bacteria<br />  proliferate-neutrophils<br />  proliferate-macrophages<br />  migrate<br />  Leukocyte-Actions<br /><br />  </font><font color="#0000aa">if</font><font color="#000000"> </font><font color="#660096">any?</font><font color="#000000"> bacteria [<br />    </font><font color="#0000aa">if</font><font color="#000000"> Neutrophil_Response </font><font color="#660096">=</font><font color="#000000"> </font><font color="#963700">&quot;Low&quot;</font><font color="#000000"> </font><font color="#660096">and</font><font color="#000000"> </font><font color="#660096">ticks</font><font color="#000000"> </font><font color="#660096">mod</font><font color="#000000"> </font><font color="#963700">3</font><font color="#000000"> </font><font color="#660096">=</font><font color="#000000"> </font><font color="#963700">0</font><font color="#000000"> [create-neutrophils </font><font color="#660096">ceiling</font><font color="#000000"> (</font><font color="#963700">.1</font><font color="#000000"> </font><font color="#660096">*</font><font color="#000000"> Immune-Cell-Infiltration) [</font><font color="#0000aa">setxy</font><font color="#000000"> </font><font color="#660096">random-xcor</font><font color="#000000"> </font><font color="#660096">random-ycor</font><font color="#000000"> </font><font color="#0000aa">setxy</font><font color="#000000"> </font><font color="#660096">pycor</font><font color="#000000"> </font><font color="#660096">pxcor</font><font color="#000000"> </font><font color="#0000aa">set</font><font color="#000000"> </font><font color="#660096">shape</font><font color="#000000"> </font><font color="#963700">&quot;neutrophil&quot;</font><font color="#000000"> </font><font color="#0000aa">set</font><font color="#000000"> age </font><font color="#963700">1</font><font color="#000000">]]<br />    </font><font color="#0000aa">if</font><font color="#000000"> Neutrophil_Response </font><font color="#660096">=</font><font color="#000000"> </font><font color="#963700">&quot;Normal&quot;</font><font color="#000000"> [create-neutrophils </font><font color="#660096">ceiling</font><font color="#000000"> (</font><font color="#963700">1</font><font color="#000000"> </font><font color="#660096">*</font><font color="#000000"> Immune-Cell-Infiltration)[</font><font color="#0000aa">setxy</font><font color="#000000"> </font><font color="#660096">random-xcor</font><font color="#000000"> </font><font color="#660096">random-ycor</font><font color="#000000"> </font><font color="#0000aa">setxy</font><font color="#000000"> </font><font color="#660096">pycor</font><font color="#000000"> </font><font color="#660096">pxcor</font><font color="#000000"> </font><font color="#0000aa">set</font><font color="#000000"> </font><font color="#660096">shape</font><font color="#000000"> </font><font color="#963700">&quot;neutrophil&quot;</font><font color="#000000"> </font><font color="#0000aa">set</font><font color="#000000"> age </font><font color="#963700">1</font><font color="#000000">]]<br />    </font><font color="#0000aa">if</font><font color="#000000"> Neutrophil_Response </font><font color="#660096">=</font><font color="#000000"> </font><font color="#963700">&quot;High&quot;</font><font color="#000000"> [create-neutrophils </font><font color="#660096">ceiling</font><font color="#000000"> (</font><font color="#963700">2</font><font color="#000000"> </font><font color="#660096">*</font><font color="#000000"> Immune-Cell-Infiltration) [</font><font color="#0000aa">setxy</font><font color="#000000"> </font><font color="#660096">random-xcor</font><font color="#000000"> </font><font color="#660096">random-ycor</font><font color="#000000"> </font><font color="#0000aa">setxy</font><font color="#000000"> </font><font color="#660096">pycor</font><font color="#000000"> </font><font color="#660096">pxcor</font><font color="#000000"> </font><font color="#0000aa">set</font><font color="#000000"> </font><font color="#660096">shape</font><font color="#000000"> </font><font color="#963700">&quot;neutrophil&quot;</font><font color="#000000"> </font><font color="#0000aa">set</font><font color="#000000"> age </font><font color="#963700">1</font><font color="#000000">]]<br /><br />  ]<br /><br />    </font><font color="#0000aa">if</font><font color="#000000"> </font><font color="#660096">any?</font><font color="#000000"> </font><font color="#660096">patches</font><font color="#000000"> </font><font color="#660096">with</font><font color="#000000"> [debris </font><font color="#660096">&gt;</font><font color="#000000"> </font><font color="#963700">0</font><font color="#000000"> </font><font color="#660096">and</font><font color="#000000"> </font><font color="#660096">ticks</font><font color="#000000"> </font><font color="#660096">&gt;</font><font color="#000000"> </font><font color="#963700">24</font><font color="#000000">] [<br />    </font><font color="#0000aa">if</font><font color="#000000"> Macrophage_Response </font><font color="#660096">=</font><font color="#000000"> </font><font color="#963700">&quot;Low&quot;</font><font color="#000000"> </font><font color="#660096">and</font><font color="#000000"> </font><font color="#660096">ticks</font><font color="#000000"> </font><font color="#660096">mod</font><font color="#000000"> </font><font color="#963700">3</font><font color="#000000"> </font><font color="#660096">=</font><font color="#000000"> </font><font color="#963700">0</font><font color="#000000"> [create-macrophages </font><font color="#660096">ceiling</font><font color="#000000"> (</font><font color="#963700">.1</font><font color="#000000"> </font><font color="#660096">*</font><font color="#000000"> Immune-Cell-Infiltration) [</font><font color="#0000aa">setxy</font><font color="#000000"> </font><font color="#660096">random-xcor</font><font color="#000000"> </font><font color="#660096">random-ycor</font><font color="#000000"> </font><font color="#0000aa">setxy</font><font color="#000000"> </font><font color="#660096">pycor</font><font color="#000000"> </font><font color="#660096">pxcor</font><font color="#000000"> </font><font color="#0000aa">set</font><font color="#000000"> </font><font color="#660096">shape</font><font color="#000000"> </font><font color="#963700">&quot;macrophage&quot;</font><font color="#000000"> </font><font color="#0000aa">set</font><font color="#000000"> age </font><font color="#963700">1</font><font color="#000000">]]<br />    </font><font color="#0000aa">if</font><font color="#000000"> Macrophage_Response </font><font color="#660096">=</font><font color="#000000"> </font><font color="#963700">&quot;Normal&quot;</font><font color="#000000"> [create-macrophages </font><font color="#660096">ceiling</font><font color="#000000"> (</font><font color="#963700">1</font><font color="#000000"> </font><font color="#660096">*</font><font color="#000000"> Immune-Cell-Infiltration)[</font><font color="#0000aa">setxy</font><font color="#000000"> </font><font color="#660096">random-xcor</font><font color="#000000"> </font><font color="#660096">random-ycor</font><font color="#000000"> </font><font color="#0000aa">setxy</font><font color="#000000"> </font><font color="#660096">pycor</font><font color="#000000"> </font><font color="#660096">pxcor</font><font color="#000000"> </font><font color="#0000aa">set</font><font color="#000000"> </font><font color="#660096">shape</font><font color="#000000"> </font><font color="#963700">&quot;macrophage&quot;</font><font color="#000000"> </font><font color="#0000aa">set</font><font color="#000000"> age </font><font color="#963700">1</font><font color="#000000">]]<br />    </font><font color="#0000aa">if</font><font color="#000000"> Macrophage_Response </font><font color="#660096">=</font><font color="#000000"> </font><font color="#963700">&quot;High&quot;</font><font color="#000000"> [create-macrophages </font><font color="#660096">ceiling</font><font color="#000000"> (</font><font color="#963700">2</font><font color="#000000"> </font><font color="#660096">*</font><font color="#000000"> Immune-Cell-Infiltration) [</font><font color="#0000aa">setxy</font><font color="#000000"> </font><font color="#660096">random-xcor</font><font color="#000000"> </font><font color="#660096">random-ycor</font><font color="#000000"> </font><font color="#0000aa">setxy</font><font color="#000000"> </font><font color="#660096">pycor</font><font color="#000000"> </font><font color="#660096">pxcor</font><font color="#000000"> </font><font color="#0000aa">set</font><font color="#000000"> </font><font color="#660096">shape</font><font color="#000000"> </font><font color="#963700">&quot;macrophage&quot;</font><font color="#000000"> </font><font color="#0000aa">set</font><font color="#000000"> age </font><font color="#963700">1</font><font color="#000000">]]<br /><br />  ]<br /><br />  </font><font color="#0000aa">ifelse</font><font color="#000000"> ShowDebris                                 </font><font color="#5a5a5a">;set patches to report debris by color</font><font color="#000000"><br />  [</font><font color="#0000aa">ask</font><font color="#000000"> </font><font color="#660096">patches</font><font color="#000000"> </font><font color="#660096">with</font><font color="#000000"> [wound </font><font color="#660096">=</font><font color="#000000"> </font><font color="#963700">1</font><font color="#000000"> </font><font color="#660096">and</font><font color="#000000"> debris </font><font color="#660096">&gt;</font><font color="#000000"> </font><font color="#963700">0</font><font color="#000000">][</font><font color="#0000aa">set</font><font color="#000000"> </font><font color="#660096">pcolor</font><font color="#000000"> </font><font color="#660096">scale-color</font><font color="#000000"> </font><font color="#963700">brown</font><font color="#000000"> debris </font><font color="#963700">0</font><font color="#000000"> </font><font color="#963700">4</font><font color="#000000">]]   </font><font color="#5a5a5a">;scale patch color based on amount of debris</font><font color="#000000"><br />  [</font><font color="#0000aa">ask</font><font color="#000000"> </font><font color="#660096">patches</font><font color="#000000"> [</font><font color="#0000aa">set</font><font color="#000000"> </font><font color="#660096">pcolor</font><font color="#000000"> </font><font color="#963700">black</font><font color="#000000">]]<br />  </font><font color="#0000aa">ask</font><font color="#000000"> </font><font color="#660096">patches</font><font color="#000000"> </font><font color="#660096">with</font><font color="#000000"> [wound </font><font color="#660096">=</font><font color="#000000"> </font><font color="#963700">1</font><font color="#000000"> </font><font color="#660096">and</font><font color="#000000"> debris </font><font color="#660096">=</font><font color="#000000"> </font><font color="#963700">0</font><font color="#000000">][</font><font color="#0000aa">set</font><font color="#000000"> </font><font color="#660096">pcolor</font><font color="#000000"> </font><font color="#963700">red</font><font color="#000000">] </font><font color="#5a5a5a">;reset patch color to red or black based on previous wound state</font><font color="#000000"><br />  </font><font color="#0000aa">ask</font><font color="#000000"> </font><font color="#660096">patches</font><font color="#000000"> </font><font color="#660096">with</font><font color="#000000"> [wound </font><font color="#660096">=</font><font color="#000000"> </font><font color="#963700">0</font><font color="#000000"> </font><font color="#660096">and</font><font color="#000000"> debris </font><font color="#660096">=</font><font color="#000000"> </font><font color="#963700">0</font><font color="#000000">][</font><font color="#0000aa">set</font><font color="#000000"> </font><font color="#660096">pcolor</font><font color="#000000"> </font><font color="#963700">black</font><font color="#000000">]<br /><br /><br />  </font><font color="#0000aa">ask</font><font color="#000000"> neutrophils </font><font color="#660096">with</font><font color="#000000"> [age </font><font color="#660096">&gt;</font><font color="#000000"> </font><font color="#963700">48</font><font color="#000000">][</font><font color="#0000aa">if</font><font color="#000000"> </font><font color="#963700">100</font><font color="#000000"> </font><font color="#660096">*</font><font color="#000000"> (age </font><font color="#660096">/</font><font color="#000000"> </font><font color="#963700">96</font><font color="#000000">) </font><font color="#660096">&gt;</font><font color="#000000"> </font><font color="#660096">random</font><font color="#000000"> </font><font color="#963700">100</font><font color="#000000"> [</font><font color="#0000aa">die</font><font color="#000000"> </font><font color="#0000aa">ask</font><font color="#000000"> </font><font color="#660096">patch-here</font><font color="#000000"> [</font><font color="#0000aa">set</font><font color="#000000"> debris debris </font><font color="#660096">+</font><font color="#000000"> </font><font color="#963700">1</font><font color="#000000">]]]<br />  </font><font color="#0000aa">ask</font><font color="#000000"> macrophages </font><font color="#660096">with</font><font color="#000000"> [age </font><font color="#660096">&gt;</font><font color="#000000"> </font><font color="#963700">96</font><font color="#000000">][</font><font color="#0000aa">if</font><font color="#000000"> </font><font color="#963700">100</font><font color="#000000"> </font><font color="#660096">*</font><font color="#000000"> (age </font><font color="#660096">/</font><font color="#000000"> </font><font color="#963700">192</font><font color="#000000">) </font><font color="#660096">&gt;</font><font color="#000000"> </font><font color="#660096">random</font><font color="#000000"> </font><font color="#963700">100</font><font color="#000000"> [</font><font color="#0000aa">die</font><font color="#000000">]]<br />  </font><font color="#0000aa">ask</font><font color="#000000"> </font><font color="#660096">patches</font><font color="#000000"> [</font><font color="#0000aa">if</font><font color="#000000"> debris </font><font color="#660096">&lt;</font><font color="#000000"> </font><font color="#963700">0</font><font color="#000000"> [</font><font color="#0000aa">set</font><font color="#000000"> debris </font><font color="#963700">0</font><font color="#000000">]]<br /><br />  </font><font color="#0000aa">ask</font><font color="#000000"> </font><font color="#660096">turtles</font><font color="#000000"> [</font><font color="#0000aa">set</font><font color="#000000"> age age </font><font color="#660096">+</font><font color="#000000"> </font><font color="#963700">1</font><font color="#000000">]<br />  </font><font color="#0000aa">set</font><font color="#000000"> number-of-cells </font><font color="#660096">count</font><font color="#000000"> bacteria           </font><font color="#5a5a5a">; this counts the total number of bacteria cells, which is shown in the counter window below the main world.</font><font color="#000000"><br />  </font><font color="#0000aa">set</font><font color="#000000"> clock clock </font><font color="#660096">+</font><font color="#000000"> </font><font color="#963700">1</font><font color="#000000"><br />  </font><font color="#0000aa">tick</font><font color="#000000"><br /><br /></font><font color="#007f69">end</font><font color="#000000"><br /><br /></font><font color="#007f69">to</font><font color="#000000"> infect<br />  </font><font color="#0000aa">ask</font><font color="#000000"> </font><font color="#660096">patch</font><font color="#000000"> </font><font color="#963700">0</font><font color="#000000"> </font><font color="#963700">0</font><font color="#000000"> [<br />    </font><font color="#0000aa">ask</font><font color="#000000"> </font><font color="#660096">n-of</font><font color="#000000"> Initial-Bacteria </font><font color="#660096">patches</font><font color="#000000"> </font><font color="#660096">in-radius</font><font color="#000000"> </font><font color="#963700">15</font><font color="#000000">[<br />      </font><font color="#0000aa">sprout</font><font color="#000000"> </font><font color="#963700">1</font><font color="#000000">        </font><font color="#5a5a5a">; create the number of initial bacteria as designated by the slider on the interface tab</font><font color="#000000"><br />      [<br />        </font><font color="#0000aa">set</font><font color="#000000"> </font><font color="#660096">breed</font><font color="#000000"> bacteria              </font><font color="#5a5a5a">; denote the 'breed' of the turtle as an &quot;bacteria&quot; cell</font><font color="#000000"><br />        </font><font color="#0000aa">set</font><font color="#000000"> </font><font color="#660096">shape</font><font color="#000000"> </font><font color="#963700">&quot;bacteria&quot;</font><font color="#000000">            </font><font color="#5a5a5a">; denote the shape of the turtle as an bacteria cell shape</font><font color="#000000"><br />        </font><font color="#0000aa">set</font><font color="#000000"> age </font><font color="#660096">random</font><font color="#000000"> prolif-rate<br />      ]<br />    ]<br />  ]<br /><br /></font><font color="#007f69">end</font><font color="#000000"><br /><br /></font><font color="#007f69">to</font><font color="#000000"> proliferate-bacteria         </font><font color="#5a5a5a">; this sub-routine simulates cell proliferation without any contact inhibition  [</font><font color="#000000"><br /> </font><font color="#0000aa">ifelse</font><font color="#000000"><br /> bact-type </font><font color="#660096">=</font><font color="#000000"> </font><font color="#963700">&quot;Aggressive strain&quot;</font><font color="#000000"><br /> [<br />  </font><font color="#0000aa">ask</font><font color="#000000"> bacteria [<br />      </font><font color="#0000aa">if</font><font color="#000000"> age </font><font color="#660096">mod</font><font color="#000000"> prolif-rate </font><font color="#660096">=</font><font color="#000000"> </font><font color="#963700">0</font><font color="#000000"> </font><font color="#660096">and</font><font color="#000000"> </font><font color="#660096">count</font><font color="#000000"> bacteria-on </font><font color="#660096">neighbors</font><font color="#000000"> </font><font color="#660096">&lt;</font><font color="#000000"> </font><font color="#963700">30</font><font color="#000000">                 </font><font color="#5a5a5a">; cell division happens for every cell at the same time (i.e. clock tick) according to the 'prolif-rate' set on the interface tab. See 'proliferate' sub-routine below.</font><font color="#000000"><br />      [<br />        </font><font color="#0000aa">hatch</font><font color="#000000"> </font><font color="#963700">5</font><font color="#000000"> [<br />          </font><font color="#0000aa">let</font><font color="#000000"> attempted-moves  </font><font color="#963700">0</font><font color="#000000"><br />          </font><font color="#0000aa">while</font><font color="#000000"> [</font><font color="#660096">any?</font><font color="#000000"> </font><font color="#660096">other</font><font color="#000000"> bacteria-here </font><font color="#660096">and</font><font color="#000000"> attempted-moves </font><font color="#660096">&lt;</font><font color="#000000"> </font><font color="#963700">16</font><font color="#000000">]<br />          [<br />            </font><font color="#0000aa">if</font><font color="#000000"> </font><font color="#660096">not</font><font color="#000000"> </font><font color="#660096">any?</font><font color="#000000"> </font><font color="#660096">neighbors</font><font color="#000000"> </font><font color="#660096">with</font><font color="#000000"> [wound </font><font color="#660096">=</font><font color="#000000"> </font><font color="#963700">1</font><font color="#000000"> </font><font color="#660096">and</font><font color="#000000"> </font><font color="#660096">not</font><font color="#000000"> </font><font color="#660096">any?</font><font color="#000000"> bacteria-here][</font><font color="#0000aa">die</font><font color="#000000">]<br />            </font><font color="#0000aa">move-to</font><font color="#000000"> </font><font color="#660096">one-of</font><font color="#000000"> </font><font color="#660096">neighbors</font><font color="#000000"> </font><font color="#660096">with</font><font color="#000000"> [wound </font><font color="#660096">=</font><font color="#000000"> </font><font color="#963700">1</font><font color="#000000"> </font><font color="#660096">and</font><font color="#000000"> </font><font color="#660096">not</font><font color="#000000"> </font><font color="#660096">any?</font><font color="#000000"> bacteria-here]<br />            </font><font color="#0000aa">set</font><font color="#000000"> attempted-moves attempted-moves </font><font color="#660096">+</font><font color="#000000"> </font><font color="#963700">1</font><font color="#000000">]<br /><br />        ]<br />      ]<br />    ]<br />  ]<br />   [<br />  </font><font color="#0000aa">ask</font><font color="#000000"> bacteria [<br />      </font><font color="#0000aa">if</font><font color="#000000"> age </font><font color="#660096">mod</font><font color="#000000"> prolif-rate </font><font color="#660096">=</font><font color="#000000"> </font><font color="#963700">0</font><font color="#000000"> </font><font color="#660096">and</font><font color="#000000"> </font><font color="#660096">count</font><font color="#000000"> bacteria-on </font><font color="#660096">neighbors</font><font color="#000000"> </font><font color="#660096">&lt;</font><font color="#000000"> </font><font color="#963700">3</font><font color="#000000">                 </font><font color="#5a5a5a">; cell division happens for every cell at the same time (i.e. clock tick) according to the 'prolif-rate' set on the interface tab. See 'proliferate' sub-routine below.</font><font color="#000000"><br />      [<br />        </font><font color="#0000aa">hatch</font><font color="#000000"> </font><font color="#963700">1</font><font color="#000000"> [<br />          </font><font color="#0000aa">let</font><font color="#000000"> attempted-moves  </font><font color="#963700">0</font><font color="#000000"><br />          </font><font color="#0000aa">while</font><font color="#000000"> [</font><font color="#660096">any?</font><font color="#000000"> </font><font color="#660096">other</font><font color="#000000"> bacteria-here </font><font color="#660096">and</font><font color="#000000"> attempted-moves </font><font color="#660096">&lt;</font><font color="#000000"> </font><font color="#963700">16</font><font color="#000000">]<br />          [<br />            </font><font color="#0000aa">if</font><font color="#000000"> </font><font color="#660096">not</font><font color="#000000"> </font><font color="#660096">any?</font><font color="#000000"> </font><font color="#660096">neighbors</font><font color="#000000"> </font><font color="#660096">with</font><font color="#000000"> [wound </font><font color="#660096">=</font><font color="#000000"> </font><font color="#963700">1</font><font color="#000000"> </font><font color="#660096">and</font><font color="#000000"> </font><font color="#660096">not</font><font color="#000000"> </font><font color="#660096">any?</font><font color="#000000"> bacteria-here][</font><font color="#0000aa">die</font><font color="#000000">]<br />            </font><font color="#0000aa">move-to</font><font color="#000000"> </font><font color="#660096">one-of</font><font color="#000000"> </font><font color="#660096">neighbors</font><font color="#000000"> </font><font color="#660096">with</font><font color="#000000"> [wound </font><font color="#660096">=</font><font color="#000000"> </font><font color="#963700">1</font><font color="#000000"> </font><font color="#660096">and</font><font color="#000000"> </font><font color="#660096">not</font><font color="#000000"> </font><font color="#660096">any?</font><font color="#000000"> bacteria-here]<br />            </font><font color="#0000aa">set</font><font color="#000000"> attempted-moves attempted-moves </font><font color="#660096">+</font><font color="#000000"> </font><font color="#963700">1</font><font color="#000000">]<br /><br />        ]<br />      ]<br />    ]<br />  ]<br /><br /></font><font color="#007f69">end</font><font color="#000000"><br /><br /></font><font color="#007f69">to</font><font color="#000000"> proliferate-neutrophils                        </font><font color="#5a5a5a">; this procedure simulates cell proliferation with contact inhibition for neutrophils</font><font color="#000000"><br />  </font><font color="#0000aa">ask</font><font color="#000000"> neutrophils [<br />    </font><font color="#0000aa">if</font><font color="#000000"> age </font><font color="#660096">mod</font><font color="#000000"> </font><font color="#963700">6</font><font color="#000000"> </font><font color="#660096">=</font><font color="#000000"> </font><font color="#963700">0</font><font color="#000000"> </font><font color="#660096">and</font><font color="#000000"> age </font><font color="#660096">&lt;</font><font color="#000000"> </font><font color="#963700">48</font><font color="#000000"> </font><font color="#660096">and</font><font color="#000000"> </font><font color="#660096">count</font><font color="#000000"> neutrophils-on </font><font color="#660096">neighbors</font><font color="#000000"> </font><font color="#660096">=</font><font color="#000000"> </font><font color="#963700">0</font><font color="#000000"><br />      [<br />        </font><font color="#0000aa">hatch</font><font color="#000000"> </font><font color="#963700">1</font><font color="#000000"> [<br />          </font><font color="#0000aa">let</font><font color="#000000"> attempted-moves  </font><font color="#963700">0</font><font color="#000000"><br />          </font><font color="#0000aa">while</font><font color="#000000"> [</font><font color="#660096">any?</font><font color="#000000"> </font><font color="#660096">other</font><font color="#000000"> neutrophils-here </font><font color="#660096">and</font><font color="#000000"> attempted-moves </font><font color="#660096">&lt;</font><font color="#000000"> </font><font color="#963700">16</font><font color="#000000">]<br />          [<br />            </font><font color="#0000aa">move-to</font><font color="#000000"> </font><font color="#660096">one-of</font><font color="#000000"> </font><font color="#660096">neighbors</font><font color="#000000"> </font><font color="#660096">with</font><font color="#000000"> [</font><font color="#660096">not</font><font color="#000000"> </font><font color="#660096">any?</font><font color="#000000"> neutrophils-here]<br />            </font><font color="#0000aa">set</font><font color="#000000"> attempted-moves attempted-moves </font><font color="#660096">+</font><font color="#000000"> </font><font color="#963700">1</font><font color="#000000">]<br /><br />        ]<br />      ]<br />  ]<br /><br /></font><font color="#007f69">end</font><font color="#000000"><br /><br /></font><font color="#007f69">to</font><font color="#000000"> proliferate-macrophages                       </font><font color="#5a5a5a">; this procedure simulates cell proliferation with contact inhibition for macrophages</font><font color="#000000"><br />  </font><font color="#0000aa">ask</font><font color="#000000"> macrophages [<br />    </font><font color="#0000aa">if</font><font color="#000000"> age </font><font color="#660096">mod</font><font color="#000000"> </font><font color="#963700">15</font><font color="#000000"> </font><font color="#660096">=</font><font color="#000000"> </font><font color="#963700">0</font><font color="#000000"> </font><font color="#660096">and</font><font color="#000000"> age </font><font color="#660096">&lt;</font><font color="#000000"> </font><font color="#963700">48</font><font color="#000000"> </font><font color="#660096">and</font><font color="#000000"> </font><font color="#660096">count</font><font color="#000000"> macrophages-on </font><font color="#660096">neighbors</font><font color="#000000"> </font><font color="#660096">=</font><font color="#000000"> </font><font color="#963700">0</font><font color="#000000"><br />      [<br />        </font><font color="#0000aa">hatch</font><font color="#000000"> </font><font color="#963700">1</font><font color="#000000"> [<br />          </font><font color="#0000aa">let</font><font color="#000000"> attempted-moves  </font><font color="#963700">0</font><font color="#000000"><br />          </font><font color="#0000aa">while</font><font color="#000000"> [</font><font color="#660096">any?</font><font color="#000000"> </font><font color="#660096">other</font><font color="#000000"> macrophages-here </font><font color="#660096">and</font><font color="#000000"> attempted-moves </font><font color="#660096">&lt;</font><font color="#000000"> </font><font color="#963700">16</font><font color="#000000">]<br />          [<br />            </font><font color="#0000aa">move-to</font><font color="#000000"> </font><font color="#660096">one-of</font><font color="#000000"> </font><font color="#660096">neighbors</font><font color="#000000"> </font><font color="#660096">with</font><font color="#000000"> [</font><font color="#660096">not</font><font color="#000000"> </font><font color="#660096">any?</font><font color="#000000"> macrophages-here]<br />            </font><font color="#0000aa">set</font><font color="#000000"> attempted-moves attempted-moves </font><font color="#660096">+</font><font color="#000000"> </font><font color="#963700">1</font><font color="#000000">]<br /><br />        ]<br />      ]<br />  ]<br /><br /></font><font color="#007f69">end</font><font color="#000000"><br /><br /></font><font color="#007f69">to</font><font color="#000000"> migrate<br />  </font><font color="#0000aa">if</font><font color="#000000"> </font><font color="#660096">random</font><font color="#000000"> </font><font color="#963700">100</font><font color="#000000"> </font><font color="#660096">&lt;=</font><font color="#000000"> migration-probability          </font><font color="#5a5a5a">; migration is probabalistic based on a slider value</font><font color="#000000"><br />  [<br />    </font><font color="#0000aa">ask</font><font color="#000000"> bacteria<br />    [<br />      </font><font color="#0000aa">if</font><font color="#000000"> </font><font color="#660096">any?</font><font color="#000000"> </font><font color="#660096">neighbors</font><font color="#000000"> </font><font color="#660096">with</font><font color="#000000"> [</font><font color="#660096">not</font><font color="#000000"> </font><font color="#660096">any?</font><font color="#000000"> bacteria-here </font><font color="#660096">and</font><font color="#000000"> wound </font><font color="#660096">=</font><font color="#000000"> </font><font color="#963700">1</font><font color="#000000">]            </font><font color="#5a5a5a">; migration only occurs if there is at least one empty neighboring patch</font><font color="#000000"><br />      [<br />        </font><font color="#0000aa">move-to</font><font color="#000000"> </font><font color="#660096">one-of</font><font color="#000000"> </font><font color="#660096">neighbors</font><font color="#000000"> </font><font color="#660096">with</font><font color="#000000"> [</font><font color="#660096">not</font><font color="#000000"> </font><font color="#660096">any?</font><font color="#000000"> bacteria-here] </font><font color="#5a5a5a">; migrate to one of the 8 neighboring patches without a cell in it already</font><font color="#000000"><br />      ]<br />    ]<br />  ]<br /><br />  </font><font color="#0000aa">ask</font><font color="#000000"> neutrophils </font><font color="#5a5a5a">;neutrophils move towards bacteria in their homine range, or to a random neighboring patch</font><font color="#000000"><br />  [<br />    </font><font color="#0000aa">ifelse</font><font color="#000000"> </font><font color="#660096">any?</font><font color="#000000"> bacteria </font><font color="#660096">in-radius</font><font color="#000000"> Neutrophil-Homing-Range [<br />      </font><font color="#0000aa">face</font><font color="#000000"> </font><font color="#660096">min-one-of</font><font color="#000000"> bacteria [</font><font color="#660096">distance</font><font color="#000000"> </font><font color="#660096">myself</font><font color="#000000">]<br />      </font><font color="#0000aa">fd</font><font color="#000000"> </font><font color="#963700">1</font><font color="#000000"><br />    ]<br />    [</font><font color="#0000aa">move-to</font><font color="#000000"> </font><font color="#660096">one-of</font><font color="#000000"> </font><font color="#660096">neighbors</font><font color="#000000">]<br />  ]<br /><br />  </font><font color="#0000aa">ask</font><font color="#000000"> macrophages<br />  [<br />    </font><font color="#0000aa">ifelse</font><font color="#000000"> </font><font color="#660096">any?</font><font color="#000000"> bacteria-on </font><font color="#660096">neighbors</font><font color="#000000"> </font><font color="#660096">or</font><font color="#000000"> </font><font color="#660096">any?</font><font color="#000000"> </font><font color="#660096">neighbors</font><font color="#000000"> </font><font color="#660096">with</font><font color="#000000"> [debris </font><font color="#660096">&gt;</font><font color="#000000"> </font><font color="#963700">0</font><font color="#000000">]<br />    [</font><font color="#0000aa">move-to</font><font color="#000000"> </font><font color="#660096">one-of</font><font color="#000000"> </font><font color="#660096">neighbors</font><font color="#000000"> </font><font color="#660096">with</font><font color="#000000"> [</font><font color="#660096">any?</font><font color="#000000"> bacteria-here </font><font color="#660096">or</font><font color="#000000"> debris </font><font color="#660096">&gt;</font><font color="#000000"> </font><font color="#963700">0</font><font color="#000000">]]<br />    [</font><font color="#0000aa">move-to</font><font color="#000000"> </font><font color="#660096">one-of</font><font color="#000000"> </font><font color="#660096">neighbors</font><font color="#000000">]<br />  ]<br /></font><font color="#007f69">end</font><font color="#000000"><br /><br /></font><font color="#007f69">to</font><font color="#000000"> Leukocyte-Actions<br />  </font><font color="#0000aa">ask</font><font color="#000000"> neutrophils [</font><font color="#0000aa">if</font><font color="#000000"> </font><font color="#660096">any?</font><font color="#000000"> bacteria-on </font><font color="#660096">patch-here</font><font color="#000000"><br />    [<br />      </font><font color="#0000aa">ask</font><font color="#000000"> </font><font color="#660096">patch-here</font><font color="#000000"> [</font><font color="#0000aa">set</font><font color="#000000"> debris debris </font><font color="#660096">+</font><font color="#000000"> (</font><font color="#660096">count</font><font color="#000000"> bacteria-here)]<br />      </font><font color="#0000aa">ask</font><font color="#000000"> bacteria-on </font><font color="#660096">patch-here</font><font color="#000000"> [</font><font color="#0000aa">die</font><font color="#000000">]<br />    ]<br /><br />  ]<br /><br />  </font><font color="#0000aa">ask</font><font color="#000000"> macrophages [</font><font color="#0000aa">if</font><font color="#000000"> </font><font color="#660096">any?</font><font color="#000000"> bacteria-on </font><font color="#660096">patch-here</font><font color="#000000"><br />    [</font><font color="#0000aa">ask</font><font color="#000000"> bacteria-on </font><font color="#660096">patch-here</font><font color="#000000"> [</font><font color="#0000aa">die</font><font color="#000000">]]<br />    </font><font color="#0000aa">if</font><font color="#000000"> [debris] </font><font color="#660096">of</font><font color="#000000"> </font><font color="#660096">patch-here</font><font color="#000000"> </font><font color="#660096">&gt;</font><font color="#000000"> </font><font color="#963700">0</font><font color="#000000"><br />    [</font><font color="#0000aa">ask</font><font color="#000000"> </font><font color="#660096">patch-here</font><font color="#000000"> [</font><font color="#0000aa">set</font><font color="#000000"> debris debris </font><font color="#660096">-</font><font color="#000000"> Macrophage-Strength]]<br />  ]<br /><br /></font><font color="#007f69">end</font>
</pre>
